<div class="player-overlay">
  <div class="player-backdrop" (click)="closePlayer.emit()"></div>
  <div class="player-card">
    <div class="player-header">
      <div class="player-title">{{ video.title }}</div>
      <div class="d-flex gap-1">
        <button class="btn btn-sm btn-outline-secondary" (click)="minimizePlayer.emit()">—</button>
        <button class="btn btn-sm btn-outline-secondary" (click)="closePlayer.emit()">✕</button>
      </div>
    </div>
    <div class="player-body">
      <youtube-player
        [videoId]="video.id" [id]="'player-' + video.id"
        [playerVars]="{autoplay: 1, rel: 0}"
        (ready)="onPlayerReady($event)"
        (stateChange)="onStateChange($event)">
      </youtube-player>
    </div>
    <div class="player-controls">
      <button class="btn btn-sm btn-outline-secondary" (click)="togglePlayPause()">
        @if (playerState() === 1 || playerState() === 3) { <!-- Playing or Buffering -->
          <span>⏸️</span>
        } @else {
          <span>▶️</span>
        }
      </button>
      <button class="btn btn-sm btn-outline-secondary" [class.active]="currentPlaybackRate() === 0.75" (click)="setPlaybackRate(0.75)">0.75x</button>
      <button class="btn btn-sm btn-outline-secondary" [class.active]="currentPlaybackRate() === 1" (click)="setPlaybackRate(1)">1x</button>
      <button class="btn btn-sm btn-outline-secondary" [class.active]="currentPlaybackRate() === 1.25" (click)="setPlaybackRate(1.25)">1.25x</button>
      <button class="btn btn-sm btn-outline-secondary" [class.active]="currentPlaybackRate() === 1.5" (click)="setPlaybackRate(1.5)">1.5x</button>
      <button class="btn btn-sm btn-outline-secondary" [class.active]="currentPlaybackRate() === 2" (click)="setPlaybackRate(2)">2x</button>
    </div>
  </div>
</div>